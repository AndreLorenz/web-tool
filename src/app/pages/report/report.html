<div class="container-fluid max-relative">
  <div class="row" ng-if="$ctrl.hasReport">
    <div class="col-md-12">
      <div ng-if="$ctrl.isRefreshLoader" class="loading">Loading&#8230;</div>
      <div class="menu-container-flex">
        <div class="dropdown">
          <a href="#pablo" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="navbarDropdownMenuLink1">
    	{{$ctrl.selected.name}}
    </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink1">
            <li class="dropdown-item" ng-repeat="groupName in $ctrl.groupNames | orderBy:'name'" ng-click="$ctrl.changeGroup(groupName)">{{groupName.name}}</li>
          </ul>
        </div>

        <div class="checkbox">
          <input id="checkbox3" type="checkbox" ng-model="$ctrl.isShowBack" ng-show="!$ctrl.viewAnalisys" ng-hide="$ctrl.viewAnalisys">
          <label for="checkbox3" ng-show="!$ctrl.viewAnalisys" ng-hide="$ctrl.viewAnalisys">
        Show Backlog
        </label>
          <input id="checkbox2" type="checkbox" ng-model="$ctrl.isChangeCard" ng-change="$ctrl.activateChangeCard()" ng-show="!$ctrl.viewAnalisys"
            ng-hide="$ctrl.viewAnalisys">
          <label for="checkbox2" ng-show="!$ctrl.viewAnalisys" ng-hide="$ctrl.viewAnalisys">
        Change Cards
        </label>
          <input id="checkbox1" type="checkbox" ng-model="$ctrl.isRefresh" ng-change="$ctrl.autoRefresh()">
          <label for="checkbox1">
        Auto Refresh
        </label>
        </div>
      </div>


      <hr class="hr" width="100%" />
      <div class="team">
        <div class="container-groups">
          <div class="group-body team-player" ng-repeat="group in $ctrl.groups | filter:{code: $ctrl.selected.code}">
            <h4 class="title">{{group.name}}</h4>

            <div ng-if="$ctrl.isVev">
              <h6 class="title">V&V</h6>
              <div class="row" ng-repeat="vev in group.vevFunctions">
                <div class="col-md-12  text-center">
                  <span class="category text-primary">{{vev.NAME}} <span ng-if="vev.QUARTER" class="text-black">- {{vev.QUARTER}}</span></span><br>
                  <div class="vev-detail">
                    <span class="description-vev text-default"><span ng-class="{'big-number': vev.DEVELOPMENT > 0, 'small-number text-success': vev.DEVELOPMENT == 0, 'text-warning': vev.DEVELOPMENT > 0, 'text-danger': vev.DEVELOPMENT > 6}">{{vev.DEVELOPMENT}}</span><br>                    Development</span>
                    <span class="description-vev text-default"><span class="small-number">{{vev.TRIAGE}}</span><br> Triage</span>
                    <span class="description-vev text-default"><span class="small-number">{{vev.ANALISYS}}</span><br> Analysis</span>
                    <span class="description-vev text-default"><span ng-class="!$ctrl.validateAlertVev(vev) ? 'small-number text-default' : 'big-number text-danger'">{{vev.VEV}}</span><br>                    V&V</span>
                    <span class="description-vev text-default"><span class="small-number">{{vev.TECHNOLOGY}} / {{vev.TECHNOLOGYSOLIC}}</span><br>                    Technology D/S</span>
                    <span class="description-vev text-default"><span class="small-number">{{vev.OPERATION}}</span><br> Operation</span>
                  </div>
                  <hr class="hr" width="100%">
                </div>
              </div>
            </div>

            <div ng-if="$ctrl.isProject">
              <h6 class="title">Project</h6>
              <div class="row" ng-repeat="project in group.projectFunctions | filter:{STAGE: $ctrl.isShowBack ? undefined : 12}">
                <div class="col-md-12">
                  <div class="progress-container" ng-class="{'progress-primary': project.STAGE == 12, 'progress-info':  project.STAGE == 42}">
                    <div class="progress-function-text">
                      <span class="progress-badge ">{{project.FUNCTIONNAME}} <span ng-if="project.QUARTER" class="text-black">- {{project.QUARTER}}</span></span>
                    </div>
                    <div class="progress">
                      <div class="progress-bar" ng-class="{'progress-bar-primary': project.STAGE == 12, 'progress-bar-info':  project.STAGE == 42}"
                        role="progressbar" aria-valuenow="{{project.PERCENTAGE}}" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': project.PERCENTAGE + '%'}">
                        <span class="progress-value">{{project.PERCENTAGE | number:2}}%</span>
                      </div>
                    </div>
                    <p class="description-function">{{project.OBSERVATION}}</p>
                  </div>
                </div>
              </div>
              <hr class="hr" width="100%">
              <h6 class="title">Opened Pull Requests</h6>
              <div class="row">
                <div class="col-md-6">
                  <p class="description-pr"><span class="big-number">{{group.pullRequests.frontend}}</span> Tasy</p>
                </div>
                <div class="col-md-6">
                  <p class="description-pr"><span class="big-number">{{group.pullRequests.backend}}</span> Tasy-Backend </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Analysis -->
      <div class="team" ng-show="$ctrl.viewAnalisys" ng-hide="!$ctrl.viewAnalisys">
        <div class="container-groups">
          <div class="group-body team-player" ng-repeat="analist in $ctrl.analists">
            <h4 class="title" ng-if="analist.dsAnalista">{{analist.dsAnalista}}</h4>
            <h4 class="title" ng-if="!analist.dsAnalista">Not name</h4>
            <div ng-if="$ctrl.isVev">
              <h6 class="title">V&V</h6>
              <div class="row" ng-repeat="info in analist.dados">
                <div class="col-md-12  text-center">
                  <span class="category text-primary">{{info.CD_FUNCAO_P}} - {{info.DS_FUNCAO}}</span><br>
                  <div class="vev-detail">
                    <span class="description-vev text-default"><span class="big-number">{{info.QT_TRIAGEM}}</span><br>Triage</span>
                    <span class="description-vev text-default"><span class="big-number">{{info.QT_OS_ANALISE}}</span><br>Analysis</span>
                  </div>
                  <hr class="hr" width="100%">
                </div>
              </div>
              <h6 class="title">OS's</h6>
              <div class="row" ng-repeat="info in analist.dados">
                <div class="col-md-12 text-center">
                  <span class="text-primary ">{{info.DS_FUNCAO}}</span><br>
                  <span class="text-default small-number">{{info.DS_LISTA_OS}}</span><br><br>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <hr class="hr" width="100%">

  <div class="row" ng-if="!$ctrl.hasReport">
    <div class="col-md-12">
      <hr class="hr" width="100%" />
      <loader message="Your report is being generated, please wait."></loader>
    </div>
  </div>
</div>